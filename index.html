<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>NyashGram ‚Äî –≥–æ–≤–æ—Ä–∏ –ø–æ-–Ω—è—à–Ω–æ–º—É üíó</title>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;500;700&family=Quicksand:wght@400;500;600&family=Nunito:wght@400;500;600&family=Fredoka:wght@400;500;600&family=M+PLUS+Rounded+1c:wght@400;500&family=Kosugi+Maru&display=swap" rel="stylesheet">
  <style>
    /* ===== –°–ë–†–û–° ===== */ 
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Comfortaa', cursive;
      background: linear-gradient(145deg, #ffd1dc, #ffe4e1);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }

    /* ===== –¢–ï–ú–´ ===== */
    .theme-pastel-pink {
      --bg-start: #ffd1dc;
      --bg-end: #ffe4e1;
      --text: #5c3a4a;
      --text-soft: #8b6f8b;
      --accent: #ffadd6;
      --card-bg: rgba(255, 255, 255, 0.25);
      --bubble-user: rgba(255, 255, 255, 0.8);
      --bubble-bot: rgba(240, 225, 255, 0.7);
    }
    .theme-milk-rose {
      --bg-start: #f9e6e6;
      --bg-end: #f5d9d9;
      --text: #4a2c1f;
      --text-soft: #8b6f6f;
      --accent: #ffb199;
      --card-bg: rgba(250, 240, 235, 0.3);
      --bubble-user: rgba(255, 255, 255, 0.8);
      --bubble-bot: rgba(255, 235, 225, 0.7);
    }
    .theme-night-blue {
      --bg-start: #d4e0f0;
      --bg-end: #c0d0e8;
      --text: #1a2a4a;
      --text-soft: #4a5a7a;
      --accent: #7ab8ff;
      --card-bg: rgba(255, 255, 255, 0.2);
      --bubble-user: rgba(255, 255, 255, 0.8);
      --bubble-bot: rgba(210, 230, 255, 0.7);
    }
    .theme-lo-fi-beige {
      --bg-start: #f9f5ee;
      --bg-end: #f0e6d9;
      --text: #4a3c2e;
      --text-soft: #8b7a6f;
      --accent: #d9b99b;
      --card-bg: rgba(255, 250, 240, 0.3);
      --bubble-user: rgba(255, 255, 255, 0.8);
      --bubble-bot: rgba(235, 220, 210, 0.7);
    }
    .theme-soft-lilac {
      --bg-start: #f5f0ff;
      --bg-end: #e6d9ff;
      --text: #3c1f5c;
      --text-soft: #6f4f8f;
      --accent: #c4a0ff;
      --card-bg: rgba(255, 255, 255, 0.25);
      --bubble-user: rgba(255, 255, 255, 0.8);
      --bubble-bot: rgba(220, 200, 255, 0.7);
    }

    /* ===== –®–†–ò–§–¢–´ ===== */
    .font-system { font-family: system-ui, -apple-system, sans-serif; }
    .font-rounded { font-family: 'Quicksand', 'M PLUS Rounded 1c', sans-serif; }
    .font-cozy { font-family: 'Comfortaa', cursive; }
    .font-elegant { font-family: 'Nunito', sans-serif; }
    .font-bold-soft { font-family: 'Fredoka', sans-serif; }
    .font-mono-cozy { font-family: 'Kosugi Maru', monospace; }

    body {
      background: linear-gradient(145deg, var(--bg-start), var(--bg-end));
      color: var(--text);
    }

    /* ===== –≠–ö–†–ê–ù–´ ===== */
    .screen {
      position: absolute;
      inset: 0;
      display: none;
      flex-direction: column;
      width: 100%;
      height: 100vh;
    }
    .screen.active { display: flex; }

    /* ===== –ö–û–ù–¢–ï–ô–ù–ï–†–´ ===== */
    #contactsList, #chatArea, #quickReplyPanel, #messageInputArea, .top-bar, #chatHeader {
      padding-left: 12px;
      padding-right: 12px;
      width: 100%;
    }

    #contactsList {
      padding-top: 8px;
      padding-bottom: 8px;
      overflow-y: auto;
      flex: 1;
    }

    #chatArea {
      padding-top: 12px;
      padding-bottom: 12px;
      overflow-y: auto;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    #quickReplyPanel {
      padding-top: 8px;
      padding-bottom: 8px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(5px);
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    #messageInputArea {
      padding-top: 8px;
      padding-bottom: 8px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      display: flex;
      gap: 6px;
    }

    .top-bar, #chatHeader {
      padding-top: 12px;
      padding-bottom: 12px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
    }

    .top-bar {
      justify-content: space-between;
    }

    #chatHeader {
      gap: 12px;
    }

    /* ===== –≠–õ–ï–ú–ï–ù–¢–´ ===== */
    .glass-container {
      background: var(--card-bg);
      backdrop-filter: blur(12px);
      border-radius: 28px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      padding: 24px 20px;
      width: 90%;
      max-width: 360px;
      margin: 0 auto;
      text-align: center;
    }

    h1 { 
      color: var(--text); 
      font-size: 2.2rem; 
      margin-bottom: 8px; 
    }

    input, select, button {
      font-family: inherit;
      border-radius: 40px;
      border: 1px solid rgba(255, 255, 255, 0.6);
      background: rgba(255, 255, 255, 0.6);
      padding: 12px 16px;
      font-size: 16px;
      color: var(--text);
    }

    button {
      background: rgba(255, 255, 255, 0.4);
      cursor: not-allowed;
      transition: all 0.3s;
      font-weight: 600;
    }

    button.active {
      background: white;
      border-color: var(--accent);
      color: var(--text);
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(255, 120, 160, 0.3);
    }

    /* ===== –ö–û–ù–¢–ê–ö–¢–´ ===== */
    .contact {
      display: flex;
      gap: 12px;
      align-items: center;
      background: var(--card-bg);
      backdrop-filter: blur(8px);
      padding: 10px 12px;
      border-radius: 24px;
      margin-bottom: 8px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      cursor: pointer;
      transition: transform 0.1s;
      position: relative;
    }

    .contact:active { transform: scale(0.99); }
    .contact.pinned { border-left: 4px solid var(--accent); }

    .avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 2px solid white;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    .info { 
      flex: 1; 
      min-width: 0;
    }
    .name { 
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .status { 
      font-size: 12px; 
      color: var(--text-soft);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .pin-icon {
      font-size: 14px;
      color: var(--accent);
      margin-left: 4px;
    }

    /* ===== –°–û–û–ë–©–ï–ù–ò–Ø ===== */
    .message {
      max-width: 80%;
      padding: 10px 14px;
      border-radius: 20px;
      animation: fadeIn 0.3s;
      word-wrap: break-word;
    }
    .message.user {
      align-self: flex-end;
      background: var(--bubble-user);
      border: 1px solid white;
    }
    .message.bot {
      align-self: flex-start;
      background: var(--bubble-bot);
      border: 1px solid rgba(255,255,255,0.4);
    }

    .quick-chip {
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(255,255,255,0.8);
      border-radius: 40px;
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
      white-space: nowrap;
    }

    /* ===== –ö–ù–û–ü–ö–ò ===== */
    #backBtn, #settingsBtn, #backFromSettingsBtn, #pinChatBtn, #muteChatBtn, #deleteChatBtn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(255,255,255,0.4);
      border: none;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      padding: 0;
    }

    #sendMessageBtn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: white;
      border: 1px solid var(--accent);
      color: var(--text);
      font-size: 20px;
      padding: 0;
    }

    /* ===== –ü–ê–ù–ï–õ–¨ –î–ï–ô–°–¢–í–ò–ô ===== */
    .chat-actions-panel {
      display: flex;
      gap: 8px;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.3);
      justify-content: flex-end;
    }

    /* ===== USERNAME ===== */
    .username-display {
      font-size: 14px;
      color: var(--text-soft);
      margin-left: 8px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="theme-pastel-pink font-cozy">

  <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –Ω–æ–º–µ—Ä–∞ -->
  <section id="phoneScreen" class="screen active">
    <div class="glass-container">
      <h1>NyashGram üíó</h1>
      <p style="color: var(--text-soft); margin-bottom: 24px;">–í—Ö–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É</p>
      <div style="display: flex; gap: 8px; margin-bottom: 16px;">
        <select id="countryCode" style="width: auto;">
          <option value="+7">üá∑üá∫ +7</option>
          <option value="+380">üá∫üá¶ +380</option>
          <option value="+375">üáßüáæ +375</option>
        </select>
        <input type="tel" id="phoneNumber" placeholder="999 999 99 99" />
      </div>
      <div id="errorMessage" style="color: #e67e8f; font-size: 14px; min-height: 20px;"></div>
      <button id="sendBtn" disabled>‚ú® –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ ‚ú®</button>
      <p style="font-size: 12px; color: var(--text-soft); margin-top: 16px;">–í–≤–µ–¥–∏ –ª—é–±–æ–π –Ω–æ–º–µ—Ä ‚Äî —ç—Ç–æ —Ç–µ—Å—Ç</p>
    </div>
  </section>

  <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –∫–æ–¥–∞ -->
  <section id="codeScreen" class="screen">
    <div class="glass-container">
      <h1>NyashGram üíó</h1>
      <p style="color: var(--text-soft); margin-bottom: 24px;">–í–≤–µ–¥–∏ –∫–æ–¥</p>
      <input type="text" id="codeInput" placeholder="------" maxlength="6" style="font-size: 28px; text-align: center; letter-spacing: 8px;" />
      <div id="codeError" style="color: #e67e8f; font-size: 14px; min-height: 20px; margin-top: 12px;"></div>
      <button id="verifyBtn" disabled>üíï –í–æ–π—Ç–∏ üíï</button>
      <p style="font-size: 12px; color: var(--text-soft); margin-top: 16px;">–ö–æ–¥: <span id="generatedCodeHint">******</span></p>
    </div>
  </section>

  <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
  <section id="profileScreen" class="screen">
    <div class="glass-container">
      <h1>–°–æ–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª—å üí´</h1>
      <input type="text" id="displayName" placeholder="–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?" style="width:100%; margin: 20px 0;" />
      <div style="margin: 20px 0;">
        <label for="avatarInput">
          <div id="avatarPreview" style="width: 100px; height: 100px; background: linear-gradient(135deg, #fbc2c2, #c2b9f0); border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; font-size: 32px; color: white; border: 3px solid white; cursor: pointer;">+</div>
          <p style="margin-top: 12px; color: var(--text-soft);">–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</p>
        </label>
        <input type="file" id="avatarInput" accept="image/*" style="display:none;" />
      </div>
      <button id="saveBtn" class="active">‚ú® –ì–æ—Ç–æ–≤–æ ‚ú®</button>
    </div>
  </section>

  <!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->
  <section id="contactsScreen" class="screen">
    <header class="top-bar">
      <div style="display: flex; align-items: center;">
        <div class="top-title" style="font-size: 1.4rem;">–ú–æ–π –º–∏—Ä–æ–∫ üíó</div>
        <span id="usernameDisplay" class="username-display"></span>
      </div>
      <button id="settingsBtn">‚öôÔ∏è</button>
    </header>
    <div id="contactsList"></div>
  </section>

  <!-- –≠–∫—Ä–∞–Ω —á–∞—Ç–∞ -->
  <section id="chatScreen" class="screen">
    <header id="chatHeader">
      <button id="backBtn">‚Üê</button>
      <div id="chatAvatar" class="avatar"></div>
      <span id="chatContactName" style="font-weight: 600; flex: 1;">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
      <button id="pinChatBtn">üìå</button>
    </header>
    
    <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –ø–∏–Ω) -->
    <div id="chatActionsPanel" class="chat-actions-panel" style="display: none;">
      <button id="pinChatActionBtn" title="–ó–∞–∫—Ä–µ–ø–∏—Ç—å">üìå</button>
      <button id="muteChatBtn" title="–í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">üîá</button>
      <button id="deleteChatBtn" title="–£–¥–∞–ª–∏—Ç—å —á–∞—Ç">üóëÔ∏è</button>
    </div>
    
    <div id="quickReplyPanel"></div>
    <div id="chatArea"></div>
    <div id="messageInputArea">
      <input type="text" id="messageInput" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å..." />
      <button id="sendMessageBtn">‚û§</button>
    </div>
  </section>

  <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
  <section id="settingsScreen" class="screen">
    <header class="top-bar">
      <button id="backFromSettingsBtn">‚Üê</button>
      <div class="top-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
      <div style="width: 36px;"></div>
    </header>
    <div style="padding: 16px; overflow-y: auto; width: 100%;">
      <div class="glass-container" style="margin-bottom: 16px;">
        <h3 style="color: var(--text); margin-bottom: 16px;">–¢–≤–æ–π –Ω–∏–∫</h3>
        <input type="text" id="settingsName" placeholder="–ò–º—è" style="width:100%; margin-bottom: 12px;" />
        <button id="saveSettingsBtn" class="active" style="margin-top: 0;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
      <div class="glass-container" style="margin-bottom: 16px;">
        <h3 style="color: var(--text); margin-bottom: 16px;">–¢–µ–º–∞</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
          <button class="theme-btn active" data-theme="pastel-pink">Pastel Pink</button>
          <button class="theme-btn" data-theme="milk-rose">Milk Rose</button>
          <button class="theme-btn" data-theme="night-blue">Night Blue</button>
          <button class="theme-btn" data-theme="lo-fi-beige">Lo-Fi Beige</button>
          <button class="theme-btn" data-theme="soft-lilac">Soft Lilac</button>
        </div>
      </div>
      <div class="glass-container">
        <h3 style="color: var(--text); margin-bottom: 16px;">–®—Ä–∏—Ñ—Ç</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
          <button class="font-btn active" data-font="font-system">System</button>
          <button class="font-btn" data-font="font-rounded">Rounded</button>
          <button class="font-btn" data-font="font-cozy">Cozy</button>
          <button class="font-btn" data-font="font-elegant">Elegant</button>
          <button class="font-btn" data-font="font-bold-soft">Bold Soft</button>
          <button class="font-btn" data-font="font-mono-cozy">Mono Cozy</button>
        </div>
      </div>
    </div>
  </section>

  <script src="app.js"></script>
  <script src="contacts.js"></script>
  <script src="chat.js"></script>
</body>
</html>